YUI.add("type_video_manager",function(P,i){var H=P.Object.getValue(YUI,["Env","My","settings","context"]),w=H.videoplayerUrl,ar=(H.videoForcedError===1),p=(H.videoFullscreen===1),aw=false,a=(H.videoAutoplay===1),V=(H.videoHtml5===1),b={statePlaying:"js-state-playing",stateMuted:"js-state-muted",stateFullscreen:"js-state-fullscreen",btnSound:"js-btn-sound",btnPlayPause:"js-btn-play-pause",btnFullscreen:"js-btn-fullscreen",btnVideomode:"js-btn-video-mode",btnVideoTiltbackMode:"js-btn-expand",customControls:".yvp-custom-controls .pl-controls-wrap"},ax=".js-stream-content-link",ab="prod",c=true,t=H.videoSingleVideo||false,z=H.videoMaxInstances||12,J=H.videoMaxLoops||3,r=(H.videoLooping===1),ay=(H.videoRelated===0),aA=(H.videoBuffering===0),an=H.videoQosRate||".1",x=H.videoYwaRate||"0",L=H.videoMinControls===1,E=H.videoMustWatch===1,am=H.videoMWSticky,A=H.videoMute===1,al={},ad=[],D={},G={},ap=H.videoSSButton,au=H.videoPausescreen,ah="not-ready",m=[],j="",B="",af=H.videoInitEvent,aa=(H.videoAsyncEnabled===1),u=H.videoplayerScriptElementId,W=(H.videoCCOnMuteEnabled===1),Z=(H.videoModeEnabled===1),o=H.videoExpName||"advance",aq=H.videoComscoreC4||"US fp",q=(H.videoTiltbackModeEnabled===1),I=(H.videoAdBeaconsDisabled===1),aj=(H.videoAdCCOnMuteEnabled),R=(H.videoStreamRapidEnabled===1),ag=!!P.one("#atomic"),K=ag?"Dn":"D-n",aD=(H.videoFetchPlayerJS===1),k=H.videoVpaidTimeout||5,v=H.videoSingleVideoClasses||[],y=H.videoSingleVideoContainers||[],l=H.videoAdAutoLoop||false,e=H.videoAdClicktoUnmute||false,Q=H.verticalVideoAdStartPercentage||0,s=H.videoDisableOnViewerShow||false,f=H.videoSetCurrentTime||false,C=H.videoPlayListSwap||false,d=H.videoViewabilityDivisible||false,ac=H.suppressAdContext||false;P.VideoManager={initPlayerJs:function(aH){var Y=this,aE,aF,aG;if(ah==="not-ready"&&aD){aF=function(){ah="ready";if(typeof aH==="function"){aH.call(Y);}};if(Y._isPlayerJSLoaded()){return aF();}ah="fetching";aG=aa&&P.one("#"+u);if(aG){aG.on("load",aF);}else{if(w&&!P.config.groups.videoplayer){aE={modules:{videoplayer:{group:"videoplayer",name:"videoplayer",type:"js",fullpath:w}},groups:{videoplayer:{name:"videoplayer",combine:false,filter:"min"}}};P.applyConfig(aE);}m.push(P.on("domready",function(){P.use("videoplayer",aF);}));}}},createPlayerInstance:function(aN,aY){var aQ=this,a0=".js-video-target",a5,aO,aR,aT,aP,aF,a1,aU,aV,aI,aH,Y,aE,a3,a4,aZ,a6,aJ={},aX="strm-inline",aL,aK,aS;if(ah!=="ready"){if(!aQ.queue){aQ.queue=[];}aN.playerConf=aY;aQ.queue.push(aN);aQ.initPlayerJs(aQ.playerInitCallback);}else{if(aN&&aN.node&&aN.uuid){aP=P.one(aN.node);if(!aP.getDOMNode()){return;}aL=aP.one("script:not(.fetch-body)");if(aL){try{aK=JSON.parse(aL.get("innerHTML"));aK.autoplay=aK.hasOwnProperty("autoplay")?aK.autoplay:true;aK.continuousPlay=aK.hasOwnProperty("continuousPlay")?aK.continuousPlay:true;}catch(a2){aK=null;}}aT=aP.generateID();if(aT in G){return;}aF=aP.one(a0);if(aF){aI=aP.getData("videoUrl");aH=aP.getData("videoXml");aE=aP.getData("playlist");aJ=aP.getData("video-cfg");playlistPos=aP.getData("video-playlist-pos");if(aJ){aJ=JSON.parse(aJ)||{};aJ=aJ.config||aJ;aX=aJ.expType||aP.getData("videoExpType")||aX;Y=aJ.playlist||(aE&&JSON.parse(aE))||null;}aO=aQ.createPlayerContainer(aF,aP,aJ);aR=aO.one(ag?".StretchedBox":".RatioBox").generateID();if(aI){a4=aP.getData("imageUrl")||"";aV={streams:[{url:aI}],images:{thumbnail:a4}};if(I){aV={id:"6bf451fd-11f9-37f9-a54c-d73d795839f6",images:{thumbnail:a4}};a3={standaloneAd:{gemini:aP.getData("geminiData"),rules:aP.getData("videoRules"),beacons:aP.getData("videoBeacons")}};}}else{if(aH){a4=aP.getData("imageUrl")||"";aV={id:"6bf451fd-11f9-37f9-a54c-d73d795839f6",images:{thumbnail:a4}};a3={standaloneAd:{xml:aH,beacons:aP.getData("videoBeacons")},vpaidTimeout:k};if(!window.flEnabled){return;}}else{aV={id:aN.uuid};if(aF.getData("yvap")){try{a3=JSON.parse(aF.getData("yvap"));}catch(aM){}}}}aS=aJ&&aJ.hideVideoTitleOnHover||false;a5=aK||{autoplay:a,ccode:B,ccOnMute:W,comscoreC4:aq,continuousPlay:Y?true:false,disableCasting:true,expBucket:P.Af.Config.getContext("bucket"),expName:(aJ&&aJ.expName)||o,expType:aX,fullscreenBtn:p,html5:V,lang:P.Af.Config.getContext("lang")||"en-US",loop:r,mute:A,pageSpaceId:P.Af.Config.get("spaceid"),pausescreen:au,playlist:Y||{mediaItems:[aV]},preload:true,qosSamplingRate:parseFloat(an),referrer:document.referrer||"",region:P.Af.Config.getContext("region")||"US",replayonlyendscreen:ay,stopBufferingOnPause:aA,sec:j,settingscreen:false,showTitleOnHover:!aS,site:"frontpage",startscreen:{showButton:ap,showDesc:false,showProvider:false,showTitle:false},CMS:{env:ab,suppressAdContext:ac},videoapps:false,ywaSamplingRate:parseFloat(x)};if(playlistPos){a5.playlistUI=aJ.playlistUI||{show:true,position:playlistPos,theme:"dark"};}if(a3){a5.YVAP=a3;var aG=aF.getData("delete-yvap-cookie");if(aG&&P.Cookie&&P.Cookie.set){var a7=new Date();a7.setDate(a7.getDate()-30);P.Cookie.set(aG,"",{expires:a7});}}if(aI&&I){if(aj){a5.ccOnMute=true;}a5.html5=aj?true:"raw";}if(aH||aI){a5.disableRecoverer=true;if(l){a5.loop=aP.getData("autoloop");if(a5.loop&&aI){a5.playlist.mediaItems[0].streams=[{url:aI}];delete a5.playlist.mediaItems[0].id;}}if(aP.one(".js-vertical-video-ad")){a5.loop=true;a5.replayonlyendscreen=false;a5.expName="sponsored_moments_ad";aF.setData("pause-landscape","1");}if(aP.hasClass("js-stream-ad")){aF.setData("pause-article","1");}if(e){a5.unMuteOnClick=true;}}if(aH){a5.expName="GeminiBRX";}if(c){a5.conviva=false;c=false;}if(aY){a5=P.merge(a5,aY);}if(aE&&aJ.expName!=="NTK"){a5=aQ._addSidekickTvConfig(a5,aP,aE);}if(R){aQ._updateVideoConfigWithRapidInstance(a5,aP);}aF.replace(aO);aU=aQ._getMediaStore(aN.boss);if(aU){a1=new YAHOO.VideoPlatform.VideoPlayer(a5,aU);}else{a1=new YAHOO.VideoPlatform.VideoPlayer(a5);}aQ._addPlayerToMap({boss:aN.boss,firedBeacons:{},guid:aT,has_interacted:false,is_playing:a5.autoplay,is_paused:false,loopCount:0,player:a1,playerNode:aO,playOnlyInViewport:aP.getData("play-only-in-viewport")||false,swapNode:aF,videoCfg:aJ});aQ.attachVideoListeners(a1,aP,aT);var aW=aP.getData("yaft-module")||undefined;if(aW&&al[aT]){if(window.performance&&typeof window.performance.now==="function"){al[aT]["yaftModuleName"]=aW;if(typeof window._videoLT==="undefined"){window._videoLT={};}window._videoLT[aW]={startTime:window.performance.now()};}}a1.render("#"+aR);if(L){aQ._setupControls(aT);}if(ar){if(a1&&a1._controller&&a1._controller.error){a1._controller.error({type:"playerError",code:"400"});}if(a1&&a1._controller&&a1._controller._vdmsPlayer&&a1._controller._vdmsPlayer._controller&&a1._controller._vdmsPlayer._controller.error){a1._controller._vdmsPlayer._controller.error({code:"SP-400-604",msg:"test error"});}}if(aP.one(".static-image-anchor")){aP.one(".static-image-anchor").addClass("D-n");}P.Global.fire("video-manager:create_player_instance",al[aT]);}}}return aT;},isNodeInViewport:function T(aI){var aH,Y=document.getElementById("mega-uh-wrapper")&&document.getElementById("mega-uh-wrapper").offsetHeight||0,aK=window.innerHeight,aJ,aE=this;if(!aI){return;}if((aI.hasClass("js-stream-ad")||aI.ancestor(".js-stream-ad"))||(aI.hasClass("js-viewer-smad")||aI.ancestor(".js-viewer-smad"))){if(!aE._scrollInfo){var aG=P.one("body");aG.plug(P.Plugin.ScrollInfo);aE._scrollInfo=aG.scrollInfo;}if(aE._scrollInfo){var aF=parseInt(aI.getData("offset"),10)||-85;aJ=aE._scrollInfo.isNodeOnscreen(aI,aF);}else{aJ=aI.inViewportRegion();}}else{aH=aI.getDOMNode();if(aH&&aH.getBoundingClientRect()&&Y&&d){nodeTop=aH.getBoundingClientRect().top;nodeHeight=aH.getBoundingClientRect().height/d;aJ=nodeTop+nodeHeight>Y&&nodeTop<aK-nodeHeight;}else{aJ=aI.inViewportRegion();}}return aJ;},_addSidekickTvConfig:function at(aE,aG,aF){var Y=this;aF=P.JSON.parse(aF);aE.autoplay=a;if(!aE.playlist.mediaItems){aE.playlist.mediaItems=aF;}aE.replayonlyendscreen=false;aE.continuousPlay=true;aE.loop=true;aE.html5=window.flEnabled?false:true;plCfg=aG.getData("cfg");html5Cfg=aG.getData("html5cfg");if(plCfg){plCfg=P.JSON.parse(plCfg);}if(html5Cfg){html5Cfg=P.JSON.parse(html5Cfg);}if(window.flEnabled&&plCfg){aE.iframeRender=true;aE=P.merge(aE,plCfg);}else{if(!window.flEnabled&&html5Cfg){aE=P.merge(aE,html5Cfg);}}return aE;},_getMediaStore:function(Y){if(al[Y]){return al[Y].player.getMediaStore();}return false;},_getPlayerMutedState:function(Y){return Y&&Y.controls&&Y.controls.getMute();},_addPlayerToMap:function(aE){var Y=aE.guid;var aF={loopCount:0,has_interacted:false,firedBeacons:{},eventSubscriptions:{playerErrors:true}};al[Y]=aE;ad.push(Y);},_disableVideo:function(aE){var Y=this;if(aE&&aE.player&&aE.player.controls.isPlaying()){aE.is_disabled=true;Y._pauseVideo(aE);}},_enableVideo:function(aE){var Y=this;if(aE&&aE.player&&aE.is_disabled){aE.is_disabled=false;Y._playVideo(aE);}},_getPlayerMapItem:function(Y){return al&&Y in al&&al[Y];},_pauseVideo:function(Y){if(Y&&Y.player&&Y.player.controls){Y.is_playing=false;Y.player.controls.pause();if(f){var aE=Y.player.controls.getCurrentTime();if(aE){Y.playerNode.setAttribute("data-vid-currenttime",aE);}}}},_playVideo:function(Y){if(Y&&Y.swapNode&&Y.swapNode.getData("pause-article")&&Y.is_disabled){return;}if(Y&&Y.player&&Y.player.controls){Y.is_playing=true;Y.player.controls.play();}},_publishUIInteract:function(aG,aE){var aF=this;var Y=aF.getVpAPI();aG._eventBus.publish(Y.UI_INTERACT,{srcElement:aE});},_setupControls:function(aJ){var aM=this,aL=al[aJ],aN=aL&&aL.is_playing?" js-state-playing":"",Y=aM._createCustomControls(aL.player),aH=Y.one(".pl-controls-wrap"),aF=aL.playerNode.one(".yvp-custom-controls"),aI=P.one(".yvp-bottom-bar"),aE,aG,aK;if(aF){aF.append(Y);aH.delegate("click",function(aP){var aO=aP.currentTarget;aL.has_interacted=true;switch(true){case (aO.hasClass(b.btnSound)):aM._toggleSoundControl(aO,aL,aJ);break;case (aO.hasClass(b.btnPlayPause)):aM._togglePlayPauseControl(aO,aL,aJ);break;case (aO.hasClass(b.btnFullscreen)):aM._toggleFullscreenControl(aO,aL,aF);break;case (aO.hasClass(b.btnVideomode)):aM._toggleVideoModeControl(aO,aL);break;case (aO.hasClass(b.btnVideoTiltbackMode)):aM._toggleTiltbackMode(aO,aL);break;default:break;}},"span");}},_toggleSoundControl:function n(aI,aG,aF){var aE=this;var aH=aG.player.controls.getMute();var Y="ctrl-mute-btn-"+(aH&&"off"||"on");if(aH){aG.player.controls.setMute(false);aE.volumeHandler(aF);aI.removeClass(b.stateMuted);}else{aG.player.controls.setMute(true);aI.addClass(b.stateMuted);}aE._publishUIInteract(aG.player,Y);},_togglePlayPauseControl:function M(aI,aH,aF){var aE=this;var aG=aE._isPlaying(aH.player);var Y="ctrl-"+(aG&&"Pause"||"Play");if(aG){aE._pauseVideo(aH);if(t){if(al&&al[aF]){al[aF].is_playing=false;}aE.playOtherVideos(aF);}aI.removeClass(b.statePlaying);}else{aE._playVideo(aH);aI.addClass(b.statePlaying);}aE._publishUIInteract(aH.player,Y);},_toggleFullscreenControl:function av(aG,aF,aE){var Y=this;if(aF.player.controls.getFullscreen()){return;}aF.player.controls.setFullscreen(true);vpAPI=Y.getVpAPI();fullscreenEvent=aF.player.on(vpAPI.PLAYER_FULLSCREEN_CHANGE,Y.fullscreenChangeHandler.bind(Y));Y.fullscreen={player:aF.player,container:aE,state:Y.controlsSnapshot(aE),evt:fullscreenEvent};aG.addClass(b.stateFullscreen);Y._publishUIInteract(aF.player,"ctrl-fullscreen-on");},_toggleVideoModeControl:function N(aH,aF){var Y=this;var aE=aF.player;var aG={action:"open",currentTime:Math.floor(aE.controls.getCurrentTime()),muted:aE.controls.getMute(),uuid:aE.playlist.getCurrentItemId()};P.Global.fire("video-modal",aG);Y._publishUIInteract(aF.player,"ctrl-videomode-on");},_toggleTiltbackMode:function O(aI,aF){var Y=this;var aE=aF&&aF.player;var aH=aF&&aF.playerNode;var aG=aH&&aH.ancestor(".js-video-content");if(!aG){return false;}aG.toggleClass("expanded");aH.toggleClass("css-hide-video-controls");Y._publishUIInteract(aE,"ctrl-tiltback-mode");},controlsSnapshot:function(aE){var aF,Y;if(aE){aF=aE&&aE.one("."+b.btnSound);Y=aE&&aE.one("."+b.btnPlayPause);if(aF&&Y){return{muted:aF.hasClass(b.stateMuted),playing:Y.hasClass(b.statePlaying)};}}},fullscreenChangeHandler:function(aE){var Y=this;if(!aE){Y.exitFullscreenCleanup();}},exitFullscreenCleanup:function(){var aF=this,aH=aF.fullscreen,aE=aH.container,Y=aE.one(".js-btn-fullscreen"),aG=aF.controlsSnapshot(aE);if(Y&&Y.test(".js-state-fullscreen")){Y.toggleClass(b.stateFullscreen);}if(aG.playing!==aH.state.playing){aE.one("."+b.btnPlayPause).toggleClass(b.statePlaying);}if(aG.muted!==aH.state.muted){aE.one("."+b.btnSound).toggleClass(b.stateMuted);}aF.fullscreen.evt();aF.fullscreen=null;},fullscreenHandler:function(aE){var aF=this,Y;if(aF.fullscreen){switch(aE){case"ctrl-fullscreen-off":aF.exitFullscreenCleanup();break;case"ctrl-mute-btn-off":aF.fullscreen.state.muted=false;break;case"ctrl-mute-btn-on":aF.fullscreen.state.muted=true;break;case"ctrl-play":aF.fullscreen.state.playing=true;break;case"ctrl-pause":aF.fullscreen.state.playing=false;break;default:break;}}},_createCustomControls:function az(aH){var aF=this;var aG=[];var Y=aF._getSoundControlMarkup(aH);var aE=aF._getPlayPauseControlMarkup(aH);if(Z){aG=[Y,aE,aF._getVideoModeMarkup()];}else{if(q){aG=[aF._getVideoTiltbackModeMarkup()];}else{aG=[Y,aE];if(p){aG.push(aF._getFullscreenControlMarkup());}}}return P.Node.create('<div class="outer-wrap"><div class="inner-wrap"><div class="pl-controls-wrap">'+aG.join("")+"</div></div></div>");},_getPlayPauseControlMarkup:function h(Y){var aE=this._isPlaying(Y)&&" js-state-playing"||"";return'<span class="js-btn-play-pause '+aE+'"> <i class="play"></i> <i class="pause"></i> </span>';},_getSoundControlMarkup:function ao(Y){var aE=Y.controls.getMute()&&" js-state-muted"||"";return'<span class="js-btn-sound '+aE+'"> <i class="on"></i> <i class="off"></i> </span>';},_getFullscreenControlMarkup:function U(){return'<span class="js-btn-fullscreen"> <i class="fs"></i> </span>';},_getVideoModeMarkup:function aC(){return'<span class="js-btn-video-mode"> <i class="video-mode"></i> </span>';},_getVideoTiltbackModeMarkup:function g(){return'<span class="js-btn-expand"><i class="on"></i></span>';},_isDestroyable:function(Y){var aF=al[Y];var aE;if(!aF||aF.is_destroyable===false){return false;}aE=aF&&!aF.has_interacted&&aF.playerNode;return aE&&!aE.inViewportRegion();},_isPlaying:function(Y){var aE=false;if(!Y||!Y.controls){return;}if(Y.controls.isPlaying){aE=Y.controls.isPlaying();}else{if(Y.controls._model){aE=!Y.controls._model.playbackState.paused;}}return aE;},_isPlayerJSLoaded:function(){return YAHOO&&YAHOO.VideoPlatform&&YAHOO.VideoPlatform.VideoPlayer;},_auditPlayerInstances:function(){var aE=ad.length,aF,Y;if(aE>z){aF=P.Array.filter(ad,this._isDestroyable);Y=aF.shift();this.destroyPlayerInstance(Y);}},createPlayerContainer:function(aM,aL,aJ){var aI=[(L&&"css-hide-video-controls")||""];var aH=ag?["Pb(56.25%)","H(0)","Pos(r)"]:["Ratio-16-9"];var aG=ag?"StretchedBox W(100%) H(100%)":"RatioBox";var aP;var Y=aM&&aM.getAttribute("href")||"";var aF=aJ&&aJ.overrideTap||false;var aK;if(aF&&Y){var aQ=aJ&&aJ.viewerEligible?aL.getData("uuid"):"";var aO=[];var aE="";if(aQ){aO=["js-content-viewer","rapid-noclick-resp","rapidnofollow"];aE=' data-uuid="'+aQ+'"';}aO.push(aG);aK='<a class="'+aO.join(" ")+'" href="'+Y+'"'+aE+"></a>";}else{aK='<div class="'+aG+'"></div></div>';}if(q){aI.push("tiltback-mode-enabled");}var aN="";if(aM.hasClass("js-vertical-video-ad")){aH=["js-smad-image","Start(0)","Pos(f)","H(100%)","W(100%)","TranslateZ(0)"];}aP=aI.concat(aH).join(" ");return P.Node.create('<div class="js-player-container '+aP+'">'+aK+"</div>");},destroyPlayerInstance:function(aE,aH){var Y=this,aG=P.Array.indexOf(ad,aE),aI;if(aE&&aE in al&&al[aE]){aI=al[aE];if(aI.playerNode.inViewportRegion&&!aI.playerNode.inViewportRegion()||aH){try{aI.player.destroy();}catch(aF){}if(aI.playerNode&&aI.playerNode.getDOMNode()&&aI.swapNode&&aI.swapNode.getDOMNode()){aI.playerNode.replace(aI.swapNode);}aI.playerNode.destroy();aI=null;delete al[aE];ad.splice(aG,1);}}if(Y.unmutedVP&&Y.unmutedVP===aE){Y.unmutedVP=null;}},_cleanup:function aB(aE){var Y=this;var aF;if(al){aF=Object.keys(al);if(Array.isArray(aF)){aF.forEach(function(aG){Y.destroyPlayerInstance(aG,true);});}}if(Array.isArray(m)){m.forEach(function(aG){aG.detach();aG=null;});}H=null;w=null;ar=null;a=null;V=null;b=null;ab=null;c=null;t=null;z=null;J=null;r=null;ay=null;aA=null;an=null;x=null;L=null;E=null;am=null;A=null;al=null;ad=null;G=null;ap=null;ah=null;m=null;j=null;B=null;af=null;aa=null;u=null;Z=null;o=null;},handleBlur:function(){var Y=this;P.Array.each(ad,function(aE){var aG=Y._getPlayerMapItem(aE);var aF=false;if(!aG){return;}if(aG.is_live_event&&aG.player){if(Y._getPlayerMutedState(aG.player)){aF=true;}}else{if(!aG.has_interacted||aG.playOnlyInViewport){aF=true;}}if(aF){Y._pauseVideo(aG);Y.updatePlayBtn(aG);}},this);},isOrientationLandscape:function(){var aE;var Y=false;if(screen.orientation&&typeof screen.orientation.angle==="number"){aE=screen.orientation.angle;}else{if(typeof window.orientation==="number"){aE=window.orientation;}}if(aE!==undefined){Y=aE===90||aE===-90||aE===270||aE===-270;}return Y;},handleOrientationChange:function(aF){var aE=this;var Y;Y=aE.isOrientationLandscape();if(Y){P.Array.each(ad,function(aG){var aH=aE._getPlayerMapItem(aG);if(aH.swapNode&&aH.swapNode.getData("pause-landscape")){aE._pauseVideo(aH);}});}},handleFocus:function(){this.playOtherVideos();},playOtherVideos:function(aF){var Y=this,aE=this.isPlayable();P.Array.each(ad,function(aG){var aJ=Y._getPlayerMapItem(aG),aH=aJ&&aJ.player,aI=al[aG]&&al[aG].playerNode;if(aJ.swapNode&&aJ.swapNode.getData("pause-article")){if(P.one("html").hasClass("Reader-open")){return;}}if(aJ.swapNode&&aJ.swapNode.getData("pause-landscape")){if(Y.isOrientationLandscape()){return;}aI=aJ.playerNode.ancestor(".js-smad-clip");}if((!aF||aF!==aG)&&aE&&aH&&(!aJ.has_interacted||aJ.playOnlyInViewport)&&aI&&Y.isNodeInViewport(aI)){Y._playVideo(aJ);Y.updatePlayBtn(aJ);if(t){aE=false;}}});},handleViewEnter:function(aH){var aL=this,aF=aH.currentTarget,Y=aF.getData("pkg-video-id")||aF.getData("uuid"),aI=aF.getData("applet-guid")||aF.generateID(),aJ=aL._getPlayerMapItem(aI),aK=aJ&&aJ.player,aG=aL.isPlayable(),aE={node:aF,uuid:Y};if(aK&&!aL._isPlaying(aK)&&aJ.playOnlyInViewport&&!aK.isDocked()){if(aG){if(aw){D.player=aI;return;}if(!aJ.has_interacted&&(aJ.is_paused||!aJ.is_playing)){aL._playVideo(aJ);}}aL.updatePlayBtn(aJ);}else{if(aE&&aE.uuid&&!aJ){aL.createPlayerInstance(aE,{autoplay:aG});}}},handleViewLeave:function(aG){var Y=this,aF=aG.currentTarget,aE=aF.getData("applet-guid")||aF.generateID(),aH=Y._getPlayerMapItem(aE);if(aH&&Y._isPlaying(aH.player)&&(!aH.has_interacted||aH.playOnlyInViewport)&&!aH.is_fullscreen&&!(aH.player&&aH.player.isDocked())){Y._pauseVideo(aH);}Y.updatePlayBtn(aH);Y._auditPlayerInstances();if(t){Y.playOtherVideos(aE);}if(D.player&&D.player===aE){D.player=false;}},_fetchMustWatch:function(){var Y=this,aE=function aF(){var aG=P.one("#mustwatch-container"),aJ=aG&&aG.one("[data-applet-type=td-applet-videoplayer]"),aI=aJ&&aJ.getData("applet-guid");if(aI){P.Global.on("player-manager:initialize-complete",function aH(){P.Global.fire("player-manager:get-player-manager",{callback:function aK(aL){var aM=aL.getPlayerInstance();Y._addPlayerToMap({loopCount:0,guid:aI,player:aM,playerNode:aJ,has_interacted:false,is_playing:false});Y._setupControls(aI);aJ.on("viewenter",Y.handleViewEnter,Y);aJ.on("viewleave",Y.handleViewLeave,Y);},instance:aI});});}};P.Af.Content.remoteApplet(P.My.App,{type:"td-applet-videoplayer",params:{mode:"listron",submode:"mustwatch",channelAlias:"popular",enable_sticky_mode:am,expName:"advance",expType:"vid-inline",spaceid:P.Af.Config.get("spaceid"),site:"frontpage",vp:0,pausescreen:0,player_mute:1,i13n:{auto:false}},placement:{node:"#mustwatch-container"}},aE);},initMustWatch:function(){var aM=this,aG=5,aH=0,aE=P.one("#applet_p_50000201"),aK=P.one("#applet_p_50000186"),aJ,aF,Y;if(aE){m.push(P.Global.on("fpvideo:ready",function aL(aR){var aO=aR&&aR.vp;if(aO){var aP=aE;var aN=aP&&aP.getData("applet-guid");var aQ=(aO&&aM._isPlaying(aO))||true;aM._addPlayerToMap({loopCount:0,guid:aN,player:aO,playerNode:aP,has_interacted:false,is_playing:aQ});m.push(aP.on("viewenter",aM.handleViewEnter,aM));m.push(aP.on("viewleave",aM.handleViewLeave,aM));aM.attachVideoListeners(aO,aP,aN);}}));return;}if(aK){aK.insert('<div id="mustwatch-container" class="css-hide-video-controls" data-offset="1000"></div>',"after");aJ=P.one("#mustwatch-container");}if(aJ){if(aJ.inViewportRegion()){if(ah==="ready"){aM._fetchMustWatch();}else{if(ah==="not-ready"){aM.initPlayerJs(aM._fetchMustWatch);}else{if(ah==="fetching"){aF=setInterval(function aI(){aH+=1;if(ah==="ready"){clearInterval(aF);aM._fetchMustWatch();}if(aH>=aG){clearInterval(aF);}},500);}}}}else{Y=aJ.on("viewenter",function(){Y.detach();aM._fetchMustWatch();});}}},init:function(){var aE=this;aE.queue=[];if(E){aE.initMustWatch();}m.push(P.Af.Event.on("content:init",aE.findVideosInit,aE));m.push(P.Af.Event.on("content-video:init",aE.findVideosInit,aE));m.push(P.Af.Event.on("content:batch",aE.findStreamVideos,aE));m.push(P.Af.Event.on("sidekicktv:init",aE.findStreamVideos,aE));aE.findDOMVideos();m.push(P.Global.on("video-manager:disable",aE._disablePlayers,aE));m.push(P.Af.Event.on("video-manager:disable",aE._disablePlayers,aE));m.push(P.Af.Event.on("page:destroy",aE._cleanup,aE));m.push(P.Global.on("video-manager:enable",aE._enablePlayers,aE));m.push(P.Af.Event.on("video-manager:enable",aE._enablePlayers,aE));m.push(P.Global.on("video-modal",function Y(aF){aF.type="video";P.Af.Event.fire("viewmode:enter",aF);}));m.push(P.on("blur",P.bind(aE.handleBlur,aE),window));m.push(P.on("focus",P.bind(aE.handleFocus,aE),window));m.push(P.on("orientationchange",P.bind(aE.handleOrientationChange,aE),window));m.push(P.Global.on("video-manager:prevent-new-playback",aE.handlePreventNewPlayback,aE));m.push(P.Global.on("video-manager:add-remote-player",aE.handleAddRemoteVideo,aE));m.push(P.Global.on("video-manager:remove-remote-player",aE.removeRemoteVideo,aE));if(s){m.push(P.Af.Event.on("viewer:show",aE._disablePlayers,aE));m.push(P.Af.Event.on("viewer:hide",aE._enablePlayers,aE));}aE.activeVideosInit();},_disablePlayers:function ak(){var Y=this;P.Array.each(ad,function(aE){var aF=Y._getPlayerMapItem(aE);if(aF.is_playing){Y._disableVideo(aF);}});},_enablePlayers:function F(){var Y=this;P.Array.each(ad,function(aE){var aF=Y._getPlayerMapItem(aE);if(aF.is_disabled){if(aF.swapNode&&aF.swapNode.getData("pause-landscape")){if(Y.isOrientationLandscape()){aF.is_disabled=false;return;}}Y._enableVideo(aF);}});},_normalizePayload:function(aG){var Y=aG&&aG.guid&&P.one("#applet_"+aG.guid)||P.one("#applet_p_50000173"),aE=aG&&aG.list,aF={container:Y,items:aE};return aF;},getVideoNodes:function(aI){var aE=aI&&aI.container,aG=aI&&aI.items,aH=null,aJ,Y,aF=this;if(aE&&aG){P.Array.each(aG,function(a0){if(a0&&(a0.type==="3"||a0.pkg_video_id||a0.videoCfg)){var aO,aV,aN,aW,aX,aR;if(!aH){aH=new P.NodeList();}Y=aE.all('[data-uuid="'+a0.id+'"]');Y.each(function(a1){if(!a1.hasClass("fake-cluster-uuid")&&!a1.hasClass("js-videomgr-excluded")){aJ=a1;}});if(aJ){var aP=Array.isArray(a0.videoAdAssets)?P.Object.getValue(a0,["videoAdAssets",0]):a0.videoAdAssets;if(aP&&aP.mediaInfo){if(l){var aT=false;if(aP.autoloop){aT=aP.autoloop==="true"?true:(aP.autoloop==="false"?false:aP.autoloop);}aJ.setData("autoloop",aT);}if(!Array.isArray(aP.mediaInfo)){aO=aF.mapVideoAdAssets(aP);if(aO&&aO.videoXml){aN=aO.videoXml;}else{aV=aO&&aO.videoUrl;}}else{for(var aM=0;aM<aP.mediaInfo.length;aM++){var aZ=aP.mediaInfo[aM];if(aZ.url&&aZ.contentType==="video/mp4"){aV=aZ.url;}if(aZ.xml){aN=aZ.xml;}}}}aW=a0.videoAdImage;aX=a0.videoAdBeacons;if(aJ.one(".js-vertical-video-ad")){var aL=aJ.get("clientHeight");var aU=Q||a0.videoAdRules&&a0.videoAdRules.viewabilityDefVideo&&parseInt(a0.videoAdRules.viewabilityDefVideo.p,10)||50;if(aL>0){var aK=-1*aL*(aU/100);aJ.setData("offset",aK);var aY=aJ.one(".js-smad-clip");if(aY){aY.setData("offset",aK);}}}else{if(aJ.hasClass("js-stream-ad")){var aQ=aJ.get("clientHeight");if(aQ){aJ.setData("offset",-1*aL*0.5);}}}if(aV){aJ.setData("videoUrl",aV);}if(aN||I){aJ.setData("videoXml",aN);if(aX){P.Object.each(aX,function(a2,a1){if(Array.isArray(a2)){aX[a1]=a2;}else{aX[a1]=[a2];}});}}if(aW){aJ.setData("imageUrl",aW);}if(aX){aJ.setData("videoBeacons",aX);}if(a0.videoAdRules){P.Object.each(a0.videoAdRules,function(a2,a1){if(Array.isArray(a2)){P.Object.each(a2,function(a3){P.Object.each(a3,function(a5,a4){a3[a4]=parseInt(a5,10);});});}else{P.Object.each(a2,function(a4,a3){a2[a3]=parseInt(a4,10);});}});aJ.setData("videoRules",a0.videoAdRules);}if(I&&aV){aR={clickUrl:a0.link,mediaInfo:aP.mediaInfo};P.Array.each(aR.mediaInfo,function aS(a1){a1.height=parseInt(a1.height,10);a1.width=parseInt(a1.width,10);a1.bitrate=parseInt(a1.bitrate,10);a1.length=parseInt(a1.length,10);});aJ.setData("geminiData",aR);}if(a0.videoCfg){aJ.setData("video-cfg",a0.videoCfg);}aH.push(aJ);aJ=null;}}});if(aH&&aH.size()>0){return aH;}}return null;},mapVideoAdAssets:function(aH){var aE={VIDEO_PRIMARY:{contentType:"video/mp4",assetName:"videoUrl"},VIDEO_PORTRAIT:{contentType:"video/mp4",assetName:"videoUrl"}};var aL;var aF={};var aK;var aJ;var aI;var Y=function(aO,aM){var aN=new RegExp(aO);return aN.test(aM.contentType);};var aG=function(aM){return aM.xml;};aH=aH?[].concat(aH):[];aH.forEach(function(aM){var aN=aE[aM.usageType];aM.mediaInfo=aM.mediaInfo?[].concat(aM.mediaInfo):[];if(aN){if(aM.mediaInfo.length>1){aI=aM.mediaInfo.filter(aG)||[];if(!aI){aJ=aM.mediaInfo.filter(Y.bind(null,aN.contentType))||[];}}else{if(aM.mediaInfo.length===1&&aM.mediaInfo[0].xml){aI=aM.mediaInfo;}else{aJ=aM.mediaInfo;}}if(aI){aF.videoXml=aI[0]&&aI[0].xml;}else{aF[aN.assetName]=aJ[0]&&aJ[0].url;}}});return aF;},_loopVideos:function(aF,Y,aG){var aN=this,aE=false,aM,aK,aH,aI,aL;Y=Y||{};aL=Y.playerConf||{};aL.autoplay=false;aK=function aK(aP,aO){var aQ={node:aP,uuid:aP.getData("pkg-video-id")||aP.getData("uuid")},aR=function aR(){var aS;if(aO===0){aS=aF.getData("pkg-video-id")||aF.getData("uuid");aL.prefetchIds=aS;aI=aN.createPlayerInstance(aQ,aL);}else{aQ.boss=aI;aN.createPlayerInstance(aQ,aL);}};setTimeout(aR,0);};aH=function aH(aO){if(aN.isNodeInViewport(aO)){aE=true;}aN.queue.push({node:aO,uuid:aO.getData("pkg-video-id")||aO.getData("uuid"),playerConf:aL});};aM=function aM(){if(aG){aG();}};var aJ=Y.init?aH:aK;if(aF){aF.each(aJ);if(Y.init){if(aE){aM();}else{P.one("window").once("scroll",aM);}}else{aM();}aN.attachViewportListeners(aF);}},findStreamVideos:function(aH){var Y=this,aG=Y._normalizePayload(aH),aE=Y.getVideoNodes(aG),aF={playerConf:aH.playerConf||{}};if(aE){Y._loopVideos(aE,aF);}},findDOMVideos:function(){var Y=P.all(".yahoo-view-video,.wafer-video,.featuredvideo");if(Y.size()>0){this._loopVideos(Y,{});}},findVideosInit:function(aH){var Y=this,aG=Y._normalizePayload(aH),aE=Y.getVideoNodes(aG),aF={init:true,playerConf:aH.playerConf||{}};if(al&&Object.keys(al).length>0){keys=Object.keys(al);if(Array.isArray(keys)){keys.forEach(function(aI){var aJ=al[aI].playerNode;if(aJ&&aJ.getDOMNode&&!aJ.getDOMNode()){Y.destroyPlayerInstance(aI,true);}});}}if(aE){Y._loopVideos(aE,aF,function(){if(Y.queue.length>0){Y.initPlayerJs(Y.playerInitCallback);}});}},activeVideosInit:function(){var Y=this;if(!window.VEX){return;}if(ah!=="ready"){Y.initPlayerJs(P.bind(Y.videoModeInstancesInit,Y));}else{Y.videoModeInstancesInit();}},videoModeInstancesInit:function(){var Y=this;var aG;var aE=[];var aF;if(!window.VEX){return;}P.Array.each(window.VEX.VideoModeInstances,function(aH){aG=aH&&aH.getPlayerInfos&&aH.getPlayerInfos();if(aG){aF=P.one(payload.node);aG.playerNode=aF;aG.is_playing=aG.config&&aG.config.autoplay;aE.push(aG);}});if(aE.length>0){Y.addRemoteVideoInstance(aE);}},handleAddRemoteVideo:function X(aF){var Y=this;var aE=Array.isArray(aF)?aF:[aF];Y.addRemoteVideoInstances(aE);},handlePreventNewPlayback:function ae(aE){var Y=this;aw=!!aE;if(!aE&&D.player){if(Y.isPlayable()&&al[D.player]){Y._playVideo(al[D.player]);D.player=false;}if(D.player&&!al[D.player]){D.player=false;}}},removeRemoteVideo:function S(aH){var Y=this;var aE=aH&&aH.guid;var aG;var aF;if(aE&&aE in al&&al[aE]){aF=P.Array.indexOf(ad,aE);aG=al[aE];aG=null;delete al[aE];ad.splice(aF,1);}},addRemoteVideoInstances:function ai(aH){var Y=this;var aG;var aF=new P.NodeList();var aE;if(Array.isArray(aH)&&aH.length>0){P.Array.each(aH,function(aI){if(aI){aG=P.one(aI.playerNode);aE=aG.generateID();Y._addPlayerToMap({guid:aE,player:aI.instance,playerNode:aG,is_destroyable:false,is_playing:aI._is_playing,eventSubscriptions:{playerErrors:false}});Y.attachVideoListeners(aI.instance,null,aE);aF.push(aG);}});}if(aF.size()>0){Y.attachViewportListeners(aF);}},attachViewportListeners:function(aE){var Y=this;m.push(aE.on("viewenter",Y.handleViewEnter,Y));m.push(aE.on("viewleave",Y.handleViewLeave,Y));},attachVideoListeners:function(aW,aQ,aT){var aS=this,aF=aS.getVpAPI(),aU,aP,aX,aZ,aO=aQ&&aQ.getData("videoBeacons"),aI=aO||false,aK=al[aT],a0=(aK&&aK.fireBeacons)||{},aE=aQ&&aQ.getData("playlist")||(aK&&aK.videoCfg&&aK.videoCfg.playlist),aV=aQ&&aQ.getData("meta"),aL=(aK&&aK.videoCfg)||{},aN=0,aM;if(aF&&al&&al[aT]){aM=al[aT].eventSubscriptions||{};aW.on(aF.UI_INTERACT,function Y(a2){var a1=a2&&a2.srcElement&&a2.srcElement.toLowerCase();if(r){aW.controls.setLoop(false);}if(al&&al[aT]){al[aT].has_interacted=true;}if(a1&&a1==="ctrl-mute-btn-off"){aS.volumeHandler(aT);}if(L&&aS.fullscreen){aS.fullscreenHandler(a1);}});aP=function(){if(al&&al[aT]){al[aT].is_playing=false;}var a2=al[aT].playerNode;var a1=a2.one(".js-cstm-end-screen");if(!a1){a1=a2.previous(".js-cstm-end-screen");if(a1){a1.remove();a2.insert(a1,a2.one(".yvp-bottom-bar")||a2.one(".vp-bottom-bar"));}}if(a1){a1.removeClass(K);}if(t){aS.playOtherVideos(aT);}};if(aM.playerErrors!==false){aU=function aU(a1){G[aT]=true;if(aI&&aQ.getData("videoXml")){aS.destroyPlayerInstance(aT,true);}if(aQ.getData("playlist")){aS.destroyPlayerInstance(aT,true);if(P.one("#applet_sidekicktv")){P.one("#applet_sidekicktv").addClass("D-n");}if(P.one("#my-adsLREC2-fallback")){P.one("#my-adsLREC2-fallback").removeClass("D-n");}}if(aQ.one(".static-image-anchor")){aQ.one(".static-image-anchor").removeClass("D-n");}if(aL.destroyOnError===true&&a1&&a1.category!=="200"){aS.destroyPlayerInstance(aT,true);P.Global.fire("video-manager:destroy_on_error",aT,a1);}};aW.on(aF.PLAYBACK_ERROR,aU);aW.on(aF.PLAYER_ERROR,aU);aX=aW.on(aF.PLAYBACK_TIMEOUT,aU);}aW.on(aF.AD_PLAYBACK_START,function aH(){var a1=al[aT].playerNode.one(".js-cstm-end-screen");if(a1){a1.addClass(K);}});aW.on(aF.PLAYER_FULLSCREEN_CHANGE,function aJ(a1){al[aT].is_fullscreen=a1;});aW.on(aF.PLAYBACK_START,function aG(){al[aT].is_playing=true;var a2=!al[aT].has_interacted&&r&&J&&(al[aT].loopCount<J);if(a2){al[aT].loopCount++;if(al[aT].loopCount===J){aW.controls.setLoop(false);}}var a1=al[aT].playerNode.one(".js-cstm-end-screen");if(a1){a1.addClass(K);}if(aI){if(aQ.getData("videoXml")){a0={VIDEO_START:true,VIDEO_QUARTILE_100:true,VIDEO_VIEW:true,VIDEO_30_SEC:true,VIDEO_QUARTILE_25:true,VIDEO_QUARTILE_50:true,VIDEO_QUARTILE_75:true};}aS.fireAdBeacon("VIDEO_START",aO,a0);}if(aX&&typeof aX==="function"){aX();}});aW.on(aF.PLAYBACK_PAUSE,function aY(){al[aT].is_playing=false;al[aT].is_paused=true;});aW.on(aF.PLAYBACK_RESUMED,function aY(){al[aT].is_playing=true;al[aT].is_paused=false;});if(aE){aE=aL.playlist||P.JSON.parse(aE);aV=aV&&P.JSON.parse(aV)||{};aW.on(aF.PLAYLIST_POSITION_CHANGE,function aR(a1){if(C){aS.swapCurrentVideoInfo(aE,a1);}if(a1<aE.length&&a1>=0&&aV[aE[a1].id]){curMeta=aV[aE[a1].id];aN=a1;aQ.one(".js-stv-title").setContent(curMeta.title);aQ.one(".js-stv-provider").setContent(curMeta.providerName);}});}aW.on(aF.PLAYLIST_COMPLETE,function(){aP();if(aI){aS.fireAdBeacon("VIDEO_QUARTILE_100",aO,a0);a0={};}});aW.on(aF.VIDEO_STARTED,function(){if(aK.yaftModuleName&&window.performance&&typeof window.performance.now==="function"){window._videoLT[aK.yaftModuleName]["loadTime"]=window.performance.now();}});if(aI){aW.on(aF.PLAYBACK_TIME_UPDATE,function(a2,a1,a3){if(a1>3&&!a0.VIDEO_VIEW){aS.fireAdBeacon("VIDEO_VIEW",aO,a0);}if(a1>30&&!a0.VIDEO_30_SEC){aS.fireAdBeacon("VIDEO_30_SEC",aO,a0);}if(a1>a3*0.25&&!a0.VIDEO_QUARTILE_25){aS.fireAdBeacon("VIDEO_QUARTILE_25",aO,a0);}if(a1>a3*0.5&&!a0.VIDEO_QUARTILE_50){aS.fireAdBeacon("VIDEO_QUARTILE_50",aO,a0);}if(a1>a3*0.75&&!a0.VIDEO_QUARTILE_75){aS.fireAdBeacon("VIDEO_QUARTILE_75",aO,a0);}});}}},swapCurrentVideoInfo:function(aE,aF){if(aE&&aE.mediaItems){aE=aE.mediaItems;}if(aF<aE.length&&aF>=0){var Y=P.one(".power-toddler #video-item-"+aF);if(Y){P.one(".lead-video-item").setAttribute("data-uuid",aE[aF]["id"]);P.one(".lead-video-item .title").setContent(Y.getData("title"));P.one(".lead-video-item .summary").setContent(Y.getData("summary"));P.one(".lead-video-item .stream-content-link").setAttribute("href",Y.getData("link"));P.one(".lead-video-item .ActionComments a").setAttribute("href",Y.getData("link"));P.one(".lead-video-item .categorylabel").setContent(Y.getData("categorylabel"));P.one(".lead-video-item .js-stream-comment-counter").setContent(Y.getData("cmtcnt"));P.one(".lead-video-item .provider").setContent(Y.getData("provider"));}}},fireAdBeacon:function(aF,Y,aH){var aI;var aG;var aE;if(!aF||aH[aF]||I){return;}aI=Y&&Y[aF];if(!aI){return;}aI=[].concat(aI);for(aG=0;aG<aI.length;aG++){aE=aI[aG];if(!aE){continue;}P.Af.Beacon.send(aE);aH[aF]=true;}},playerInitCallback:function(){var aF=this,aE=aF.queue,Y=aE&&aE.length||0,aH=a,aG,aJ,aI;if(Y!==0){aF.setUltParams(aE[0]);}for(aG=0;aG<Y;aG++){aJ=aE[aG];aI=aJ.playerConf||{};if(aJ.node.inViewportRegion()){aI.autoplay=aH;aF.createPlayerInstance(aJ,aI);if(t){aH=false;}}else{aI.autoplay=false;aF.createPlayerInstance(aJ,aI);}}aF.queue=[];},getVpAPI:function(){var Y=this;if(!Y.vpAPI){Y.vpAPI=YAHOO&&YAHOO.VideoPlatform&&YAHOO.VideoPlatform.API_Events;}return Y.vpAPI;},setUltParams:function(aJ){var aE=this,Y=aJ&&aJ.node,aI=Y.ancestor("[data-i13n-sec]"),aG=Y&&Y.one(".js-video-content"),aF=aG&&aG.getData("ylk"),aH=/;?ccode:(.[^;]+);/i,aK;j=aI&&aI.getData("i13n-sec")||"";if(aF){aK=aF.match(aH);B=(aK&&aK[1])||"";}},isPlayable:function(){var Y=a;if(t){P.Array.each(ad,function(aG){var aI=al[aG]&&al[aG].playerNode;var aF=false;if(aI){aF=v.some(function aH(aJ){return aI.hasClass(aJ);});aF=aF||y.some(function aE(aJ){return aI.ancestor("."+aJ);});}if(aI&&!G[aG]&&aF&&(al[aG].is_playing===true)){Y=false;}});}return Y;},updatePlayBtn:function(aE){var Y;Y=aE&&aE.playerNode&&aE.playerNode.one(b.customControls+" ."+b.btnPlayPause);if(L&&Y){if(aE.is_playing&&!Y.hasClass(b.statePlaying)){Y.addClass(b.statePlaying);}else{if(!aE.is_playing&&Y.hasClass(b.statePlaying)){Y.removeClass(b.statePlaying);}}}},volumeHandler:function(aE){var Y=this,aF,aH,aG;if(Y.unmutedVP&&aE!==Y.unmutedVP){if(al&&al[Y.unmutedVP]){aH=al[Y.unmutedVP];aF=aH.player;aG=aH.playerNode;aF.controls.setMute(true);if(!aG.inViewportRegion()){aF.controls.pause(true);aH.is_playing=false;Y.updatePlayBtn(aH);}aH.has_interacted=false;}}Y.unmutedVP=aE;},_updateVideoConfigWithRapidInstance:function(aF,aI){var aJ=aI.ancestor("[data-i13n-sec]");var aH=aJ&&aJ.getData("i13n-sec")||"";var aE={};var aG={};var aK=P.Object.getValue(window.rapidPageConfig,["rapidConfig","keys"])||{};var Y=aI.one(ax);if(Y){aE=P.Af.rapid.parseYLK(Y);}aF.sec=aF.sec||aH;aF.ccode=aF.ccode||aE.ccode||"";aF.cpos=aF.cpos||aE.cpos||"";aE.sec=aH;aG._rid=aK._rid||"";aG.pt=aK.pt||"home";aG.site=aK.site||"";aF.rapidConfig={rapid:window.rapidInstance,clickParams:aE,pageParams:aG};return aF;}};if(w){P.VideoManager.init();}},"0.0.1",{requires:["af-content","af-event","base","event-custom","event-viewenter","node-core"]});YUI.add("event-viewenter",function(g,e){var b="inviewport",h=g.Object.getValue(YUI,["Env","My","settings","context"]),a,f=h.videoplayerScrollThrottle&&parseInt(h.videoplayerScrollThrottle,10)||0,d=h.videoViewabilityDivisible||false,c={_checkNode:function(m,v,u){var p,t,o,i,s=v.handle.evt.type,k,l,q,j,n;m=g.one(m);k=m.getData("timer"+s);if(k){clearTimeout(k);}l=function r(){o=m.getDOMNode();a=document.getElementById("mega-uh-wrapper")&&document.getElementById("mega-uh-wrapper").offsetHeight||0;i=window.innerHeight;if(o&&o.getBoundingClientRect()&&a&&d){n=o.getBoundingClientRect().top;j=o.getBoundingClientRect().height/d;p=n+j>a&&n<i-j;}else{q=parseInt(m.getData("offset"),10)||-85;p=u.isNodeOnscreen(m,q);}t=m.getData(b);if((s==="viewenter"&&p&&!t)||(s==="viewleave"&&!p&&t)){v.fire({target:m});m.setData(b,p);}};if(f){k=setTimeout(l,f);m.setData("timer"+s,k);}else{l();}},_notify:function(m,l,k,j){var i=l.handle.evt.type;if(i==="viewenter"||i==="viewleave"){j._checkNode(k,l,this);}else{l.fire({target:k});}},_filterNotify:function(q,o,m,n){var k,j,p,l=o.handle.evt.type;p=g.Selector.query(m||"*");for(k=0,j=p.length;k<j;k++){if(l==="viewenter"||l==="viewleave"){n._checkNode(p[k],o,this);}else{o.fire({target:p[k]});}}},_bind:function(m,j,l,i){var k,n,o,p;o=i||m;p=i?this._filterNotify:this._notify;if(this.type==="viewenter"||this.type==="viewleave"){k="scroll";n=g.one("body");}else{k=this.type;n=m;}n.plug(g.Plugin.ScrollInfo);n.scrollInfo.set("scrollDelay",25);j.handle=n.scrollInfo.on(k,p,null,l,o,this);},on:function(k,i,j){return this._bind(k,i,j);},delegate:function(l,j,k,i){return this._bind(l,j,k,i);},detach:function(j,i){i.handle.detach();},detachDelegate:function(j,i){i.handle.detach();}};g.Event.define("viewenter",c,true);g.Event.define("viewleave",c,true);g.Event.define("scrollToBottom",c,true);g.Event.define("scrollToTop",c,true);g.Event.define("scrollToLeft",c,true);g.Event.define("scrollToRight",c,true);},"1.0.0",{requires:["event-synthetic","node-scroll-info"]});/* Copyright (c) 2020, Yahoo! Inc.  All rights reserved. */
